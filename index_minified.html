<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title> - js13k 2022 - </title>
    <style>
        * { background: #000000; padding: 0; margin: 0; }
        canvas { background: rgb(0, 0, 0); display: block; margin: 0 auto;}
    </style>
</head>
<body>

<canvas id="myCanvas" width="800" height="720" ></canvas>

<script>

var canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),preSetupCarregado=!1,fim=!1,txtY=-100,cenaCarregada=!1,podeEnter=!1,podeCriarCarta=!0,chao=canvas.height-300;pltAlturasOcupadas=[0,0,0];var forcaVento=1,forcaVentoJogador=1,perseguir=!0,tempoPassa=!0,gameoverY=-100,coletados=0,coletadosTotal=100,quems=[],moedasMax=13,corFundo=1,cartaAnterior=10,extra=3,idade=0,idadeT=0,pagina=0,tEspera=0,tEspera2=0,moedasContaTmp=0,paralax=0,t_inicial=0,t_final=0,t_flag=!1,clockSegundos=0,rightPressed=!1,leftPressed=!1,upPressed=!1,downPressed=!1,enterPressed=!1,espacoSolto=!1,xPressed=!1,zPressed=!1,podeMusica=!1,abaixaSom=!1,temaMudo=[],tema01=[],notas={do0:16.35,"do#0":17.32,reb0:17.32,re0:18.35,"re#0":19.45,mib0:19.45,mi0:20.6,fa0:21.83,"fa#0":23.12,solb0:23.12,sol0:24.5,"sol#0":25.96,lab0:25.96,la0:27.5,"la#0":29.14,sib0:29.14,si0:30.87,do1:32.7,"do#1":34.65,reb1:34.65,re1:36.71,"re#1":38.89,mib1:38.89,mi1:41.2,fa1:43.65,"fa#1":46.25,solb1:46.25,sol1:49,"sol#1":51.91,lab1:51.91,la1:55,"la#1":58.27,sib1:58.27,si1:61.74,do2:65.41,"do#2":69.3,reb2:69.3,re2:73.42,"re#2":77.78,mib2:77.78,mi2:82.41,fa2:87.31,"fa#2":92.5,solb2:92.5,sol2:98,"sol#2":103.83,lab2:103.83,la2:110,"la#2":116.54,sib2:116.54,si2:123.47,do3:130.81,"do#3":138.59,reb3:138.59,re3:146.83,"re#3":155.56,mib3:155.56,mi3:164.81,fa3:174.61,"fa#3":185,solb3:185,sol3:196,"sol#3":207.65,lab3:207.65,la3:220,"la#3":233.08,sib3:233.08,si3:246.94,do4:261.63,"do#4":277.18,reb4:277.18,re4:293.66,"re#4":311.13,mib4:311.13,mi4:329.63,fa4:349.23,"fa#4":369.99,solb4:369.99,sol4:392,"sol#4":415.3,lab4:415.3,la4:440,"la#4":466.16,sib4:466.16,si4:493.88,do5:523.25,"do#5":554.37,reb5:554.37,re5:587.33,"re#5":622.25,mib5:622.25,mi5:659.26,fa5:698.46,"fa#5":739.99,solb5:739.99,sol5:783.99,"sol#5":830.61,lab5:830.61,la5:880,"la#5":932.33,sib5:932.33,si5:987.77,do6:1046.5,"do#6":1108.73,reb6:1108.73,re6:1174.66,"re#6":1244.51,mib6:1244.51,mi6:1318.51,fa6:1396.91,"fa#6":1479.98,solb6:1479.98,sol6:1567.98,"sol#6":1661.22,lab6:1661.22,la6:1760,"la#6":1864.66,sib6:1864.66,si6:1975.53,do7:2093,"do#7":2217.46,reb7:2217.46,re7:2349.32,"re#7":2489.02,mib7:2489.02,mi7:2637.02,fa7:2793.83,"fa#7":2959.96,solb7:2959.96,sol7:3135.96,"sol#7":3322.44,lab7:3322.44,la7:3520,"la#7":3729.31,sib7:3729.31,si7:3951.07,do8:4186.01};paleta={1:"#9bbc0f",2:"#8bac0f",3:"#306230",4:"#0f380f"},spr_jogador=[[[0,0,4,4,4,4,0,0],[0,4,4,2,2,4,4,0],[4,4,2,2,2,2,4,0],[4,2,2,2,3,2,4,0],[4,4,2,2,2,2,4,0],[0,4,4,2,4,4,4,0],[0,0,4,4,4,0,0,0],[0,4,4,4,4,4,0,0],[0,3,3,3,2,4,0,0],[0,0,4,4,4,4,3,2],[0,0,4,4,4,4,0,0],[0,0,3,3,3,3,0,0],[0,0,3,0,0,3,0,0],[0,0,4,4,0,3,0,0],[0,1,0,0,0,4,4,0]],[[0,0,4,4,4,4,0,0],[0,4,4,2,2,4,4,0],[4,4,2,2,2,2,4,0],[4,2,2,2,3,2,4,0],[4,4,2,2,2,2,4,0],[0,4,4,2,4,4,4,0],[0,0,4,4,4,0,0,0],[0,4,4,4,4,4,0,0],[0,4,4,4,4,4,3,2],[0,3,3,3,2,4,0,0],[0,0,4,4,4,4,0,0],[0,0,3,3,3,3,0,0],[0,0,3,0,0,3,0,0],[0,0,3,0,0,4,4,0],[0,0,4,4,0,0,0,0]]],spr_jogadorAbaixa=[[[0,0,4,4,4,4,0,0,0,0,0,0],[0,4,4,2,2,4,4,0,0,0,0,0],[4,4,2,2,2,2,4,0,0,0,0,0],[4,2,2,2,3,2,4,0,0,0,0,0],[4,4,2,2,2,2,4,0,2,0,0,4],[0,4,4,2,4,4,4,3,0,0,3,4],[0,0,4,4,4,0,0,0,3,3,0,0],[0,3,4,4,4,4,4,4,3,0,0,4],[0,3,3,2,4,4,4,3,3,3,3,4]]],spr_jogadorPulo=spr_jogador,spr_jogadorDireita=spr_jogador,spr_rio=[[[2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3]],[[3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2]]],spr_pltH1=[[[2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2]]],spr_pltV1=[[[2,2,2],[2,2,2],[2,2,2],[2,2,2],[2,2,2],[2,2,2],[2,2,2],[2,2,2],[2,2,2]]],spr_pltV2=[[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]],spr_morte=[[[0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,4,0,0,0,0,0],[0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,3,3,3,3,33,0],[0,0,0,0,0,4,4,4,4,4,0,0,0,0,0,0,3,3,3,3,3,3],[0,0,0,0,4,4,4,4,4,4,4,0,0,0,0,0,3,3,3,3,3,3],[0,0,0,4,4,4,4,3,3,4,4,0,0,0,0,0,3,3,0,0,0,3],[0,0,0,4,4,4,3,2,2,3,4,4,0,0,0,0,4,0,0,0,0,0],[0,0,4,4,4,3,2,1,1,1,3,4,0,0,0,0,4,0,0,0,0,0],[0,0,4,4,4,2,4,1,1,4,1,4,0,0,0,0,4,0,0,0,0,0],[0,0,4,4,4,1,4,1,1,4,1,4,0,0,0,4,4,4,0,0,0,0],[0,0,4,4,4,1,1,1,1,1,1,4,0,0,4,2,2,2,4,0,0,0],[0,0,4,4,4,2,1,4,4,1,3,4,0,4,4,2,1,1,4,0,0,0],[0,0,0,4,4,3,1,1,1,1,3,4,4,4,4,2,1,1,4,0,0,0],[0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0],[0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0],[0,0,4,4,4,4,4,4,4,4,4,3,4,4,4,4,4,0,0,0,0,0],[0,0,4,4,3,4,4,4,4,4,3,3,4,4,0,4,4,0,0,0,0,0],[0,0,4,4,4,3,4,4,4,4,4,3,3,0,0,0,4,0,0,0,0,0],[0,4,4,4,4,3,4,4,4,4,4,4,4,0,0,0,4,0,0,0,0,0],[0,4,4,4,4,3,4,4,4,4,4,4,0,0,0,0,4,0,0,0,0,0],[4,4,4,4,4,3,4,4,4,4,4,4,0,0,0,0,4,0,0,0,0,0],[4,2,2,2,4,3,4,4,4,4,4,3,0,0,0,0,4,0,0,0,0,0],[4,2,1,1,3,4,4,4,4,4,4,4,4,0,0,0,4,0,0,0,0,0],[0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,4,0,0,0,0,0],[0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,0,0,0,0,0],[0,0,4,4,4,4,4,4,4,4,4,3,4,4,0,0,4,0,0,0,0,0],[0,0,4,4,4,3,4,4,4,4,4,3,4,4,0,0,4,0,0,0,0,0],[0,4,4,4,3,4,4,4,4,4,3,4,4,4,0,0,4,0,0,0,0,0],[4,4,4,0,4,4,4,0,4,4,4,0,4,4,0,0,4,0,0,0,0,0],[4,0,0,0,0,4,0,0,0,0,4,0,4,0,0,0,4,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,4,0,4,4,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0],[0,0,0,0,0,4,4,4,4,4,0,0,0,0,0,0,3,3,3,3,33,0],[0,0,0,0,4,4,4,4,4,4,4,0,0,0,0,0,3,3,3,3,3,3],[0,0,0,4,4,4,4,3,3,4,4,0,0,0,0,0,3,3,3,3,3,3],[0,0,0,4,4,4,3,2,2,3,4,4,0,0,0,0,3,3,0,0,0,3],[0,0,4,4,4,3,2,1,1,1,3,4,0,0,0,0,4,0,0,0,0,0],[0,0,4,4,4,2,4,1,1,4,1,4,0,0,0,0,4,0,0,0,0,0],[0,0,4,4,4,1,4,1,1,4,1,4,0,0,0,0,4,0,0,0,0,0],[0,0,4,4,4,1,1,1,1,1,1,4,0,0,0,4,4,4,0,0,0,0],[0,0,4,4,4,2,1,4,4,1,3,4,0,4,4,2,2,2,4,0,0,0],[0,0,0,4,4,3,1,1,1,1,3,4,4,4,4,2,1,1,4,0,0,0],[0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,2,1,1,4,0,0,0],[0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0],[0,0,4,4,4,4,4,4,4,4,4,3,4,4,4,4,4,4,0,0,0,0],[0,0,4,4,3,4,4,4,4,4,3,3,4,4,4,4,4,0,0,0,0,0],[0,0,4,4,4,3,4,4,4,4,4,3,3,0,0,4,4,0,0,0,0,0],[0,4,4,4,4,3,4,4,4,4,4,4,4,0,0,0,4,0,0,0,0,0],[0,4,4,4,4,3,4,4,4,4,4,4,0,0,0,0,4,0,0,0,0,0],[4,4,4,4,4,3,4,4,4,4,4,4,0,0,0,0,4,0,0,0,0,0],[4,2,2,2,4,3,4,4,4,4,4,3,0,0,0,0,4,0,0,0,0,0],[4,2,1,1,3,4,4,4,4,4,4,4,4,0,0,0,4,0,0,0,0,0],[0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,4,0,0,0,0,0],[0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,0,0,0,0,0],[0,0,4,4,4,4,4,4,4,4,4,3,4,4,0,0,4,0,0,0,0,0],[0,0,4,4,4,3,4,4,4,4,4,3,4,4,0,0,4,0,0,0,0,0],[0,4,4,4,3,4,4,4,4,4,3,4,4,4,0,0,4,0,0,0,0,0],[0,4,4,0,4,4,4,0,4,4,4,0,4,4,0,0,4,0,0,0,0,0],[0,4,0,0,4,0,0,0,0,4,0,0,0,4,0,0,4,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0]]],spr_morteR=[[[0,0,0,0,0,4,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0],[0,3,3,3,3,3,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0],[3,3,3,3,3,3,0,0,0,0,0,0,4,4,4,4,4,0,0,0,0,0],[3,3,3,3,3,3,0,0,0,0,0,4,4,4,4,4,4,4,0,0,0,0],[3,0,0,0,3,3,0,0,0,0,0,4,4,3,3,4,4,4,4,0,0,0],[0,0,0,0,0,4,0,0,0,0,4,4,3,2,2,3,4,4,4,0,0,0],[0,0,0,0,0,4,0,0,0,0,4,3,1,1,1,2,3,4,4,4,0,0],[0,0,0,0,0,4,0,0,0,0,4,1,4,1,1,4,2,4,4,4,0,0],[0,0,0,0,4,4,4,0,0,0,4,1,4,1,1,4,1,4,4,4,0,0],[0,0,0,4,2,2,2,4,0,0,4,1,1,1,1,1,1,4,4,4,0,0],[0,0,0,4,1,1,2,4,4,0,4,3,1,4,4,1,2,4,4,4,0,0],[0,0,0,4,1,1,2,4,4,4,4,3,1,1,1,1,3,4,4,0,0,0],[0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0],[0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0],[0,0,0,0,0,4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,0,0],[0,0,0,0,0,4,4,0,4,4,3,3,4,4,4,4,4,3,4,4,0,0],[0,0,0,0,0,4,0,0,0,3,3,4,4,4,4,4,3,4,4,4,0,0],[0,0,0,0,0,4,0,0,0,4,4,4,4,4,4,4,3,4,4,4,4,0],[0,0,0,0,0,4,0,0,0,0,4,4,4,4,4,4,3,4,4,4,4,0],[0,0,0,0,0,4,0,0,0,0,4,4,4,4,4,4,3,4,4,4,4,4],[0,0,0,0,0,4,0,0,0,0,3,4,4,4,4,4,3,4,2,2,2,4],[0,0,0,0,0,4,0,0,0,4,4,4,4,4,4,4,4,3,1,1,2,4],[0,0,0,0,0,4,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0],[0,0,0,0,0,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0],[0,0,0,0,0,4,0,0,4,4,3,4,4,4,4,4,4,4,4,4,0,0],[0,0,0,0,0,4,0,0,4,4,3,4,4,4,4,4,3,4,4,4,0,0],[0,0,0,0,0,4,0,0,4,4,4,3,4,4,4,4,4,3,4,4,4,0],[0,0,0,0,0,4,0,0,4,4,0,4,4,4,0,4,4,4,0,4,4,4],[0,0,0,0,0,4,0,0,0,4,0,4,0,0,0,0,4,0,0,0,0,4],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,0,0],[0,0,0,0,0,4,0,0,0,0,0,0,0,4,4,4,4,0,4,0,0,0],[0,3,3,3,3,3,0,0,0,0,0,0,4,4,4,4,4,0,0,0,0,0],[3,3,3,3,3,3,0,0,0,0,0,4,4,4,4,4,4,4,0,0,0,0],[3,3,3,3,3,3,0,0,0,0,0,4,4,3,3,4,4,4,4,0,0,0],[3,0,0,0,3,3,0,0,0,0,4,4,3,2,2,3,4,4,4,0,0,0],[0,0,0,0,0,4,0,0,0,0,4,3,1,1,1,2,3,4,4,4,0,0],[0,0,0,0,0,4,0,0,0,0,4,1,4,1,1,4,2,4,4,4,0,0],[0,0,0,0,0,4,0,0,0,0,4,1,4,1,1,4,1,4,4,4,0,0],[0,0,0,0,4,4,4,0,0,0,4,1,1,1,1,1,1,4,4,4,0,0],[0,0,0,4,2,2,2,4,4,0,4,3,1,4,4,1,2,4,4,4,0,0],[0,0,0,4,1,1,2,4,4,4,4,3,1,1,1,1,3,4,4,0,0,0],[0,0,0,4,1,1,2,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0],[0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0],[0,0,0,0,4,4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,0,0],[0,0,0,0,0,4,4,4,4,4,3,3,4,4,4,4,4,3,4,4,0,0],[0,0,0,0,0,4,4,0,0,3,3,4,4,4,4,4,3,4,4,4,0,0],[0,0,0,0,0,4,0,0,0,4,4,4,4,4,4,4,3,4,4,4,4,0],[0,0,0,0,0,4,0,0,0,0,4,4,4,4,4,4,3,4,4,4,4,0],[0,0,0,0,0,4,0,0,0,0,4,4,4,4,4,4,3,4,4,4,4,4],[0,0,0,0,0,4,0,0,0,0,3,4,4,4,4,4,3,4,2,2,2,4],[0,0,0,0,0,4,0,0,0,4,4,4,4,4,4,4,4,3,1,1,2,4],[0,0,0,0,0,4,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0],[0,0,0,0,0,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0],[0,0,0,0,0,4,0,0,4,4,3,4,4,4,4,4,4,4,4,4,0,0],[0,0,0,0,0,4,0,0,4,4,3,4,4,4,4,4,3,4,4,4,0,0],[0,0,0,0,0,4,0,0,4,4,4,3,4,4,4,4,4,3,4,4,4,0],[0,0,0,0,0,4,0,0,4,4,0,4,4,4,0,4,4,4,0,4,4,0],[0,0,0,0,0,4,0,0,4,0,0,0,4,0,0,0,0,4,0,0,4,0],[0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]],spr_burger=[[[0,0,3,3,3,3,3,0,0],[0,3,3,1,3,3,1,3,0],[0,3,3,3,3,1,3,3,0],[4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4],[0,3,3,3,3,3,3,3,0],[0,3,3,3,3,3,3,3,0]]],spr_maca=[[[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,3,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,3,3,2,3,3,0,0],[0,3,3,3,3,3,3,3,0],[0,3,3,3,3,3,1,3,0],[0,3,3,3,3,3,2,3,0],[0,3,3,3,3,3,3,3,0],[0,0,3,3,3,3,3,0,0]]],spr_pizza=[[[0,0,0,0,2,0,0,0,0],[0,0,0,2,2,2,0,0,0],[0,0,0,2,2,2,0,0,0],[0,0,2,2,2,2,4,0,0],[0,0,4,4,2,2,4,0,0],[0,0,4,4,2,2,2,0,0],[0,0,2,2,2,2,2,0,0],[0,0,2,2,2,2,2,0,0],[0,4,4,2,2,2,2,2,0],[0,4,4,2,2,4,4,2,0],[0,2,2,2,2,4,4,2,0],[0,3,3,3,3,3,3,3,0],[3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3]]],spr_salada=[[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,2,0,0,0,0,0,0],[0,0,0,2,0,0,0,0,2],[2,0,2,2,4,0,2,2,0],[0,2,2,4,0,2,4,4,4],[2,2,1,1,1,4,4,4,4],[3,3,3,3,3,3,3,3,3],[0,3,3,3,3,3,3,3,0],[0,0,3,3,3,3,3,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]],spr_sorvete=[[[0,0,0,4,4,4,0,0,0],[0,0,3,4,4,4,3,0,0],[0,0,4,4,4,4,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,4,4,4,0,0],[0,0,4,4,4,4,4,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,2,0,0,0,0]]],spr_castanha=[[[0,0,0,3,3,3,0,0,0],[0,0,0,0,3,0,0,0,0],[0,0,0,0,3,0,0,0,0],[0,3,3,3,3,3,3,3,0],[3,3,3,3,3,3,3,3,3],[4,4,4,4,4,4,4,2,4],[4,4,4,2,4,4,4,4,4],[0,4,2,4,4,4,4,4,0],[0,4,4,4,4,4,4,4,0],[0,4,4,4,4,2,4,4,0],[0,0,4,4,2,4,4,0,0],[0,0,4,4,4,4,4,0,0],[0,0,0,4,4,4,0,0,0]]],spr_sushi=[[[0,0,4,4,4,4,4,0,0],[0,4,1,1,1,1,1,4,0],[4,1,1,3,3,3,1,1,4],[4,1,3,3,2,3,3,1,4],[4,1,1,3,3,3,1,1,4],[4,4,1,1,1,1,1,4,4],[4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4],[0,4,4,4,4,4,4,4,0],[0,0,4,4,4,4,4,0,0]]],spr_chocolate=[[[0,0,0,0,0,0,0,0,0],[0,4,4,4,4,4,4,4,0],[0,4,4,4,3,4,4,4,0],[0,4,3,3,4,3,3,4,0],[0,4,4,4,4,4,4,4,0],[0,4,4,4,4,4,4,4,0],[0,4,4,4,3,4,4,4,0],[0,4,3,3,4,3,3,4,0],[0,4,4,4,4,4,4,4,0],[0,4,4,4,4,4,4,4,0],[0,4,4,4,3,4,4,4,0],[0,4,3,3,4,3,3,4,0],[0,4,4,4,4,4,4,4,0],[0,0,0,0,0,0,0,0,0]]],spr_refrigerante=[[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,3,3,0,0],[0,0,0,0,0,3,0,0,0],[0,0,0,0,0,3,0,0,0],[0,0,2,2,2,2,2,0,0],[0,0,4,1,1,3,4,0,0],[0,0,4,1,1,3,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,3,4,4,0,0],[0,0,4,4,4,4,4,0,0],[0,0,4,4,4,4,4,0,0],[0,0,3,3,3,3,3,0,0],[0,0,0,0,0,0,0,0,0]]],spr_dormir8h=[[[0,0,4,0,0,0,0,0,0],[0,4,0,4,0,4,0,0,0],[0,0,4,0,0,4,0,0,0],[0,4,0,4,0,4,4,4,0],[0,0,4,0,0,4,0,4,0],[0,0,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,0],[4,2,2,0,0,0,0,0,0],[4,3,3,3,3,3,3,3,3],[4,3,3,3,3,3,3,3,4],[4,0,0,0,0,0,0,0,4]]],spr_cafe=[[[0,0,0,0,0,0,0,0,0],[0,0,0,2,0,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,0,0,0,2,0],[0,0,0,0,0,2,0,0,0],[0,0,0,2,1,0,0,0,0],[0,0,0,1,1,0,0,2,0],[0,0,0,4,4,4,4,4,4],[3,3,3,4,4,4,4,1,4],[3,2,3,4,4,4,4,2,4],[3,3,3,4,4,4,4,4,4],[0,0,0,4,4,4,4,4,4],[0,0,0,0,3,3,3,3,0],[0,0,0,0,0,0,0,0,0]]],spr_livro=[[[4,4,4,4,4,4,2,0,0],[4,4,4,4,4,4,2,4,0],[4,4,4,4,4,4,2,4,0],[4,3,3,3,3,4,2,4,0],[4,4,4,4,4,4,2,4,0],[4,4,4,4,4,4,2,4,0],[4,4,4,4,4,4,2,4,0],[4,4,4,4,4,4,2,4,0],[4,4,4,4,4,4,2,4,0],[4,2,2,2,2,2,2,4,0],[4,4,4,4,4,4,4,4,0]]],spr_exercicios=[[[0,4,0,0,0,0,0,4,0],[4,4,0,0,0,0,0,4,4],[4,4,3,3,3,3,3,4,4],[4,4,0,0,0,0,0,4,4],[0,4,0,0,0,0,0,4,0]]],spr_dancar=[[[0,3,3,3,3,3,3,3,0],[3,3,3,3,3,3,3,3,3],[3,3,2,2,2,2,2,3,3],[3,3,2,3,3,3,3,2,3],[3,3,2,3,3,3,3,2,3],[3,3,2,3,3,3,3,2,3],[3,2,2,3,3,3,2,2,3],[3,2,2,3,3,3,2,2,3],[3,3,3,3,3,3,3,3,3],[0,3,3,3,3,3,3,3,0]]],spr_cartaAtiva=[[[4,3,4,3,4,3,4,3,4],[3,2,2,2,2,2,2,2,3],[4,2,2,2,2,2,2,2,4],[3,2,2,2,2,2,2,2,3],[4,2,2,2,2,2,2,2,4],[3,2,2,2,2,2,2,2,3],[4,2,2,2,2,2,2,2,4],[3,2,2,2,2,2,2,2,3],[4,2,2,2,2,2,2,2,4],[3,2,2,2,2,2,2,2,3],[4,2,2,2,2,2,2,2,4],[3,2,2,2,2,2,2,2,3],[4,2,2,2,2,2,2,2,4],[3,2,2,2,2,2,2,2,3],[4,3,4,3,4,3,4,3,4]]],spr_love=[[[3,4,2,4,3],[4,4,4,4,4],[4,4,4,4,4],[0,4,4,4,0],[0,0,4,0,0]]],spr_medical=[[[0,0,4,0,0],[0,0,4,0,0],[4,4,4,4,4],[0,0,4,0,0],[0,0,4,0,0]]],spr_epiphany=[[[0,3,3,3,0],[3,0,0,0,3],[3,0,2,0,3],[3,0,3,0,3],[0,4,4,4,0],[0,3,3,3,0],[0,0,4,0,0]]],spr_lost=[[[0,0,4,0,0],[0,0,4,0,0],[0,0,4,0,0],[4,3,4,3,4],[0,4,4,4,0],[0,0,4,0,0]]],spr_achievement=[[[0,0,4,0,0],[0,3,4,3,0],[4,4,3,4,4],[0,4,4,4,0],[0,4,0,4,0],[0,0,0,0,0]]],spr_blackout=[[[0,0,3,0,0],[0,3,4,3,0],[0,3,4,3,0],[0,0,4,0,0],[0,0,1,0,0],[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0]]],spr_overwhelmed=[[[0,3,3,3,0],[3,0,0,0,3],[3,0,0,0,3],[3,0,0,0,3],[0,3,3,3,0],[0,0,4,0,0],[0,0,4,0,0],[0,0,4,0,0]]],spr_bravery=[[[0,0,3,0,0],[0,3,3,3,0],[0,3,3,3,0],[0,3,3,3,0],[0,3,3,3,0],[0,3,3,3,0],[0,3,3,3,0],[4,4,4,4,4],[0,0,4,0,0],[0,0,4,0,0],[0,0,0,0,0]]],spr_carta=[[[4,2,4,2,4,2,4,2,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,2,4,2,4,2,4,2,4]]],spr_cartaEstaciona=[[[4,2,4,2,4,2,4,2,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,4,4,4,4,4,4,4,4],[2,4,4,4,4,4,4,4,2],[4,2,4,2,4,2,4,2,4]],[[0,0,4,2,4,2,4,0,0],[0,0,2,4,4,4,2,0,0],[0,0,4,4,4,4,4,0,0],[0,0,2,4,4,4,2,0,0],[0,0,4,4,4,4,4,0,0],[0,0,2,4,4,4,2,0,0],[0,0,4,4,4,4,4,0,0],[0,0,2,4,4,4,2,0,0],[0,0,4,4,4,4,4,0,0],[0,0,2,4,4,4,2,0,0],[0,0,4,4,4,4,4,0,0],[0,0,2,4,4,4,2,0,0],[0,0,4,4,4,4,4,0,0],[0,0,2,4,4,4,2,0,0],[0,0,4,2,4,2,4,0,0]],[[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0],[0,0,0,0,4,0,0,0,0]]];class Palco{constructor(a,t){this.cena=a,this.musica=t}chamaCena(){0==this.cena&&telaInicial(),1==this.cena&&tutorial(),2==this.cena&&cena()}tocaMusica(){"temaMudo"==this.musica&&tocaMusica(temaMudo),"temaTutorial"==this.musica&&tocaMusica(temaTutorial),"temaPrincipal"==this.musica&&tocaMusica(temaPrincipal),"temaGameOver"==this.musica&&tocaMusica(temaGameOver)}}class Relogio{constructor(){this.t_flag=!1,this.t_inicial=0,this.t_final=0,this.segundos=0,this.decsegundos=0}clockInterno(){0==this.t_flag&&(this.t_inicial=Date.now(),this.t_final=Date.now(),this.t_flag=!0),this.t_final-this.t_inicial<100?this.t_final=Date.now():(++this.decsegundos,this.t_flag=!1),this.segundos=ajustaResolucao(this.decsegundos/10,1)}}class UIs{constructor(){this.margemEsqTxt=70,this.margemEsqBarras=86,this.alturaBarrasOut=18,this.alturaBarrasIn=14,this.larguraBarrasOut=160,this.larguraBarrasIn=this.larguraBarrasOut-4}gameover(){qdSolido(250,gameoverY,300,300,4),qdSolido(260,gameoverY+10,280,280,3);var a="",t="",o="";if(coletados<21&&(a="G a m e   o v e r",t="36",o="Impact"),coletados>=21&&(a="Almost there!",t="32",o="Impact"),coletados>=30&&(a="So close!",t="32",o="Impact"),coletados>=32&&(a="You died, but lived a good life!",t="16",o="Verdana"),txt1.puro(a,canvas.width/2,gameoverY+70,t+"px "+o,"center",1),gameoverY<150&&gameoverY++,150==gameoverY){var i="- You survived for "+idade+" year";1!=idade&&(i+="s"),txt1.puro(i,canvas.width/2,280,"18px Arial","center",1);var s="- And collected "+coletados;s+=1!=coletados?" items & cards":" item & card",txt1.puro(s,canvas.width/2,310,"18px Arial","center",1),txt1.puro("Thanks for playing!",canvas.width/2,370,"18px Verdana","center",1),txt1.puro("press ENTER to play again",canvas.width/2,410,"21px Impact","center",1),podeEnter=!0}}atualiza(){if(jogador.vida=(jogador.corpo+jogador.mente+jogador.alma)/3,tempoPassa&&relog0.segundos>=idadeT+7){idade++;var a=random(1,3);1==a&&jogador.corpo>0&&(jogador.corpo-=15,jogador.corpo<0&&(jogador.corpo=0)),2==a&&jogador.mente>0&&(jogador.mente-=15,jogador.mente<0&&(jogador.mente=0)),3==a&&jogador.alma>0&&(jogador.alma-=15,jogador.alma<0&&(jogador.alma=0)),idadeT=relog0.segundos}}desenha(){qdSolido(0,580,800,canvas.height-chao,3),txt1.puro("life",310,702,"24px Arial","center",1),qdSolido(298,676,22,-70,1),qdSolido(300,674,18,-65*jogador.vida/100,4),ctx.beginPath(),ctx.moveTo(260,610),ctx.lineTo(280,660),ctx.lineTo(260,700),ctx.fillStyle=paleta[2],ctx.fill(),ctx.closePath(),txt1.puro("body",this.margemEsqTxt,canvas.height-97,"24px Arial","right",1),qdSolido(this.margemEsqBarras,canvas.height-112,this.larguraBarrasOut,this.alturaBarrasOut,1),qdSolido(this.margemEsqBarras+2,canvas.height-110,this.larguraBarrasIn*jogador.corpo/100,this.alturaBarrasIn,4),txt1.puro("mind",this.margemEsqTxt,canvas.height-57,"24px Arial","right",1),qdSolido(this.margemEsqBarras,canvas.height-112+38,this.larguraBarrasOut,this.alturaBarrasOut,1),qdSolido(this.margemEsqBarras+2,canvas.height-110+38,this.larguraBarrasIn*jogador.mente/100,this.alturaBarrasIn,4),txt1.puro("soul",this.margemEsqTxt,canvas.height-17,"24px Arial","right",1),qdSolido(this.margemEsqBarras,canvas.height-112+78,this.larguraBarrasOut,this.alturaBarrasOut,1),qdSolido(this.margemEsqBarras+2,canvas.height-110+78,this.larguraBarrasIn*jogador.alma/100,this.alturaBarrasIn,4),qdSolido(630,610,150,100,4),ctx.beginPath(),ctx.font="64px Impact",ctx.textAlign="center",relog0.segundos>=idadeT+.5||0==idade?ctx.fillStyle=paleta[1]:ctx.fillStyle=paleta[3],ctx.fillText(idade,703,675),ctx.closePath(),1==idade?txt1.puro("year survived ",708,702,"21px Arial","center",1):txt1.puro("years survived ",708,702,"21px Arial","center",1),qdSolido(340,600,270,110,2),txt1.puro("destiny card",348,canvas.height-98,"18px Arial","left",3),txt1.puro("itens & cards: "+coletados,704,604,"16px Arial","center",1)}}class Sprite{constructor(a,t,o,i,s){this.centroX=a,this.centroY=t,this.lado=o,this.sprite=i,this.largura=this.lado*this.sprite[0][0].length,this.altura=this.lado*this.sprite[0].length,this.x=Math.floor(this.centroX-this.largura/2),this.y=Math.floor(this.centroY-this.altura/2),this.tUltimoFrame=0,this.tFrame=s,this.frame=0,this.ladoEsquerdo=this.x,this.ladoDireito=this.x+this.largura,this.ladoCima=this.y,this.ladoBaixo=this.y+this.altura}desenha(){this.largura=this.lado*this.sprite[0][0].length,this.altura=this.lado*this.sprite[0].length,this.x=Math.floor(this.centroX-this.largura/2),this.y=Math.floor(this.centroY-this.altura/2),this.ladoEsquerdo=this.x,this.ladoDireito=this.x+this.largura,this.ladoCima=this.y,this.ladoBaixo=this.y+this.altura,this.centroX=this.x+this.largura/2,this.centroY=this.y+this.altura/2;for(var a=0;a<this.sprite[this.frame].length;a++)for(var t=0;t<this.sprite[this.frame][a].length;t++)0!=this.sprite[this.frame][a][t]&&(ctx.beginPath(),ctx.rect(this.x+t*this.lado,this.y+a*this.lado,this.lado,this.lado),ctx.fillStyle=paleta[this.sprite[this.frame][a][t]],ctx.fill(),ctx.closePath()),this.tUltimoFrame+this.tFrame<=relog0.segundos&&(this.frame++,this.frame==this.sprite.length&&(this.frame=0),this.tUltimoFrame=relog0.segundos)}}class Instrumento{constructor(a,t,o){this.loop=a,this.partitura=o,this.tempo0=relog0.segundos,this.tempoC=relog0.segundos,this.tempoMusica=this.tempoC-this.tempo0,this.qualNota=o[0],this.duracao=o[1],this.volume=o[2],this.tipo=o[3],this.tempoProxNota=t,this.audioCtx=new AudioContext,this.ganho=this.audioCtx.createGain(),this.nota=this.audioCtx.createOscillator()}toca(){this.tempoMusica>=this.tempoProxNota&&(this.audioCtx.close(),this.audioCtx=new AudioContext,this.ganho=this.audioCtx.createGain(),this.nota=this.audioCtx.createOscillator(),this.ganho.connect(this.audioCtx.destination),this.nota.type=this.tipo,this.nota.frequency.value=notas[this.qualNota],this.nota.connect(this.ganho),1==abaixaSom?this.ganho.gain.setValueAtTime(this.volume/7,this.audioCtx.currentTime):this.ganho.gain.setValueAtTime(this.volume,this.audioCtx.currentTime),this.ganho.gain.exponentialRampToValueAtTime(1e-4,this.audioCtx.currentTime+this.duracao),this.nota.start(0),this.nota.stop(this.audioCtx.currentTime+this.duracao+10),this.tempoProxNota=Number.parseFloat(this.tempoMusica+this.duracao).toFixed(1),1==this.loop&&this.partitura.splice(this.partitura.length,0,this.partitura[0],this.partitura[1],this.partitura[2],this.partitura[3]),this.partitura.splice(0,4),0==this.loop&&0==this.partitura.length?(this.audioCtx.close(),this.tempoProxNota=-1):(this.qualNota=this.partitura[0],this.duracao=this.partitura[1],this.volume=this.partitura[2],this.tipo=this.partitura[3])),this.tempoC=relog0.segundos,this.tempoMusica=this.tempoC-this.tempo0}}class Notas{constructor(a,t,o,i){this.qualNota=a,this.duracao=t,this.tipo=i,this.volume=o,this.contador=0,this.audioCtx=new AudioContext,this.ganho=this.audioCtx.createGain(),this.nota=this.audioCtx.createOscillator()}toca(){this.audioCtx.close(),this.audioCtx=new AudioContext,this.ganho=this.audioCtx.createGain(),this.nota=this.audioCtx.createOscillator(),this.ganho.connect(this.audioCtx.destination),this.nota.type=this.tipo,this.nota.frequency.value=notas[this.qualNota],this.ganho.gain.setValueAtTime(this.volume,this.audioCtx.currentTime),this.nota.connect(this.ganho),this.nota.start(),this.ganho.gain.exponentialRampToValueAtTime(1e-5,this.audioCtx.currentTime+this.duracao),this.nota.stop(this.audioCtx.currentTime+this.duracao+1)}}class Texto{constructor(){this.x=0,this.y=0,this.frame=0,this.setup=!1,this.tProxTroca=0}pisca(a,t,o,i,s,e,r,d,l,h){0==this.setup&&(this.tProxTroca=relog0.segundos+l,this.setup=!0),ctx.beginPath(),ctx.font=o,ctx.textAlign=i,0==this.frame&&(ctx.fillStyle=paleta[s],ctx.fillText(a,r,d),relog0.segundos>=this.tProxTroca&&(this.tProxTroca=ajustaResolucao(relog0.segundos+h,1),this.frame=1)),1==this.frame&&(ctx.fillStyle=paleta[e],ctx.fillText(t,r,d),relog0.segundos>=this.tProxTroca&&(this.tProxTroca=ajustaResolucao(relog0.segundos+l,1),this.frame=0)),ctx.closePath()}surge(a,t,o,i,s,e,r,d,l,h){ctx.beginPath(),ctx.font=t,ctx.textAlign=o,0==this.setup&&(this.tProxTroca=relog0.segundos+h,this.frame=0,this.setup=!0),0==this.frame&&(ctx.fillStyle=paleta[i],ctx.fillText(a,d,l),relog0.segundos>=this.tProxTroca&&(this.tProxTroca=ajustaResolucao(relog0.segundos+h,1),this.frame=1)),1==this.frame&&(ctx.fillStyle=paleta[s],ctx.fillText(a,d,l),relog0.segundos>=this.tProxTroca&&(this.tProxTroca=ajustaResolucao(relog0.segundos+h,1),this.frame=2)),2==this.frame&&(ctx.fillStyle=paleta[e],ctx.fillText(a,d,l),relog0.segundos>=this.tProxTroca&&(this.tProxTroca=ajustaResolucao(relog0.segundos+h,1),this.frame=3)),3==this.frame&&(ctx.fillStyle=paleta[r],ctx.fillText(a,d,l)),ctx.closePath()}puro(a,t,o,i,s,e){ctx.beginPath(),ctx.font=i,ctx.textAlign=s,ctx.fillStyle=paleta[e],ctx.fillText(a,t,o),ctx.closePath()}}class Jogadores extends Sprite{constructor(a,t,o,i,s){super(a,t,o,i,s),this.tUltimoFrame=0,this.frame=0,this.largura=this.lado*this.sprite[0][0].length,this.altura=this.lado*this.sprite[0].length,this.centroX=this.largura/2,this.centroY=this.altura/2,this.ladoEsquerdo=this.x,this.ladoDireito=this.x+this.largura,this.ladoCima=this.y,this.ladoBaixo=this.y+this.altura,this.colidiuDireita=!1,this.colidiuEsquerda=!1,this.colidiuCima=!1,this.colidiuBaixo=!1,this.colidiuMorte=!1,this.colidiuMorteT=0,this.podeDireita=!1,this.podeEsquerda=!1,this.podeCima=!1,this.podeBaixo=!1,this.limiteDireita=0,this.limiteEsquerda=0,this.limiteCima=0,this.limiteBaixo=0,this.passoDireita=6,this.passoEsquerda=9,this.impulso=!1,this.alturaPulo=210,this.forcaImpulso=18,this.noAr=!1,this.ultimoChao=this.y,this.forcaGravidade=10,this.gravidade0=this.forcaGravidade,this.puloCool=!0,this.puloCoolT=0,this.corpo=100,this.mente=100,this.alma=100,this.vida=100,this.vidaY=10,this.corpoAnterior=this.corpo,this.menteAnterior=this.mente,this.almaAnterior=this.alma,this.corpoDelta=this.corpo-this.corpoAnterior,this.menteDelta=this.mente-this.menteAnterior,this.almaDelta=this.alma-this.almaAnterior,this.corpoUpdate=!1,this.menteUpdate=!1,this.almaUpdate=!1,this.corpoUpdateT=0,this.menteUpdateT=0,this.almaUpdateT=0,this.exibeUpdateT=1.5,this.posUpdateCorpo=-20,this.posUpdateMente=0,this.posUpdateAlma=20,this.somParedePode=!0,this.somMorte=!1,this.somMorteCool=!0,this.somMorteCoolT=0,this.somSlideCool=!0,this.somSlideCoolT=!0}colisaoCarta(){atualizaPos(this),(this.ladoDireito+this.passoDireita>carta.ladoEsquerdo&&this.ladoDireito<carta.ladoDireito&&(this.ladoCima>carta.ladoCima&&this.ladoCima<carta.ladoBaixo||this.ladoBaixo>carta.ladoCima&&this.ladoBaixo<carta.ladoBaixo)||this.ladoEsquerdo-this.passoEsquerda<carta.ladoDireito&&this.ladoEsquerdo>carta.ladoEsquerdo&&(this.ladoCima>carta.ladoCima&&this.ladoCima<carta.ladoBaixo||this.ladoBaixo>carta.ladoCima&&this.ladoBaixo<carta.ladoBaixo)||this.ladoCima-this.forcaImpulso<carta.ladoBaixo&&this.ladoBaixo>carta.ladoBaixo&&(this.ladoDireito>carta.ladoEsquerdo&&this.ladoDireito<carta.ladoDireito||this.ladoEsquerdo>carta.ladoEsquerdo&&this.ladoEsquerdo<carta.ladoDireito)||this.ladoBaixo-this.forcaGravidade<carta.ladoCima&&this.ladoBaixo>carta.ladoBaixo&&(this.ladoDireito>carta.ladoEsquerdo&&this.ladoDireito<carta.ladoDireito||this.ladoEsquerdo>carta.ladoEsquerdo&&this.ladoEsquerdo<carta.ladoDireito))&&(0==carta.pega&&somCarta(),carta.pega=!0)}colisaoMorte(){atualizaPos(this),this.ladoDireito+this.passoDireita>morte.ladoEsquerdo1&&this.ladoDireito<morte.ladoDireito1&&(this.ladoCima>morte.ladoCima1&&this.ladoCima<morte.ladoBaixo1||this.ladoBaixo>morte.ladoCima1&&this.ladoBaixo<morte.ladoBaixo1)||this.ladoEsquerdo-this.passoEsquerda<morte.ladoDireito1&&this.ladoEsquerdo>morte.ladoEsquerdo1&&(this.ladoCima>morte.ladoCima1&&this.ladoCima<morte.ladoBaixo1||this.ladoBaixo>morte.ladoCima1&&this.ladoBaixo<morte.ladoBaixo1)||this.ladoCima-this.forcaImpulso<morte.ladoBaixo1&&this.ladoCima>morte.ladoCima1&&(this.ladoDireito>morte.ladoEsquerdo1&&this.ladoDireito<morte.ladoDireito1||this.ladoEsquerdo>morte.ladoEsquerdo1&&this.ladoEsquerdo<morte.ladoDireito1)||this.ladoBaixo-this.forcaGravidade<morte.ladoCima1&&this.ladoBaixo>morte.ladoBaixo1&&(this.ladoDireito>morte.ladoEsquerdo1&&this.ladoDireito<morte.ladoDireito1||this.ladoEsquerdo>morte.ladoEsquerdo1&&this.ladoEsquerdo<morte.ladoDireito1)||this.ladoDireito+this.passoDireita>morte.ladoEsquerdo2&&this.ladoDireito<morte.ladoDireito2&&(this.ladoCima>morte.ladoCima2&&this.ladoCima<morte.ladoBaixo2||this.ladoBaixo>morte.ladoCima2&&this.ladoBaixo<morte.ladoBaixo2)||this.ladoEsquerdo-this.passoEsquerda<morte.ladoDireito2&&this.ladoEsquerdo>morte.ladoEsquerdo2&&(this.ladoCima>morte.ladoCima2&&this.ladoCima<morte.ladoBaixo2||this.ladoBaixo>morte.ladoCima2&&this.ladoBaixo<morte.ladoBaixo2)||this.ladoCima-this.forcaImpulso<morte.ladoBaixo2&&this.ladoCima>morte.ladoCima2&&(this.ladoDireito>morte.ladoEsquerdo2&&this.ladoDireito<morte.ladoDireito2||this.ladoEsquerdo>morte.ladoEsquerdo2&&this.ladoEsquerdo<morte.ladoDireito2)||this.ladoBaixo-this.forcaGravidade<morte.ladoCima2&&this.ladoBaixo>morte.ladoBaixo2&&(this.ladoDireito>morte.ladoEsquerdo2&&this.ladoDireito<morte.ladoDireito2||this.ladoEsquerdo>morte.ladoEsquerdo2&&this.ladoEsquerdo<morte.ladoDireito2)||this.ladoDireito+this.passoDireita>morte.ladoEsquerdo3&&this.ladoDireito<morte.ladoDireito3&&(this.ladoCima>morte.ladoCima3&&this.ladoCima<morte.ladoBaixo3||this.ladoBaixo>morte.ladoCima3&&this.ladoBaixo<morte.ladoBaixo3)||this.ladoEsquerdo-this.passoEsquerda<morte.ladoDireito3&&this.ladoEsquerdo>morte.ladoEsquerdo3&&(this.ladoCima>morte.ladoCima3&&this.ladoCima<morte.ladoBaixo3||this.ladoBaixo>morte.ladoCima3&&this.ladoBaixo<morte.ladoBaixo3)||this.ladoCima-this.forcaImpulso<morte.ladoBaixo3&&this.ladoCima>morte.ladoCima3&&(this.ladoDireito>morte.ladoEsquerdo3&&this.ladoDireito<morte.ladoDireito3||this.ladoEsquerdo>morte.ladoEsquerdo3&&this.ladoEsquerdo<morte.ladoDireito3)||this.ladoBaixo-this.forcaGravidade<morte.ladoCima3&&this.ladoBaixo>morte.ladoBaixo3&&(this.ladoDireito>morte.ladoEsquerdo3&&this.ladoDireito<morte.ladoDireito3||this.ladoEsquerdo>morte.ladoEsquerdo3&&this.ladoEsquerdo<morte.ladoDireito3)?(this.colidiuMorte=!0,this.vida>0&&(this.corpo>0&&(this.corpo-=.5),this.mente>0&&(this.mente-=.5),this.alma>0&&(this.alma-=.5),morte.centroX<this.centroX&&(this.x+=random(5,10)),morte.centroX>this.centroX&&(this.x+=random(-10,-5)))):this.colidiuMorte=!1}colisaoMoedas(){atualizaPos(this);for(var a=0;a<moedas.length;a++)1==moedas[a].disponivel&&this.ladoEsquerdo<moedas[a].ladoEsquerdo+moedas[a].largura&&this.ladoDireito>moedas[a].ladoDireito-moedas[a].largura&&this.ladoCima<moedas[a].ladoCima+moedas[a].altura&&this.ladoBaixo>moedas[a].ladoBaixo-moedas[a].altura&&(somMoeda(),coletados++,moedas[a].pega=!0,this.corpo+=moedas[a].corpo,this.corpoDelta=moedas[a].corpo,this.corpoUpdate=!0,this.corpo>100&&(this.corpo=100),this.mente+=moedas[a].mente,this.menteDelta=moedas[a].mente,this.menteUpdate=!0,this.mente>100&&(this.mente=100),this.alma+=moedas[a].alma,this.almaDelta=moedas[a].alma,this.almaUpdate=!0,this.alma>100&&(this.alma=100),moedas.splice(a,1))}updateStatus(){if(this.colidiuMorte&&(this.colidiuMorteT=relog0.segundos,this.vidaY=12,this.somMorte=!0),relog0.segundos<=this.colidiuMorteT+.5&&100!=this.vida&&this.vida>0&&(txt1.puro("life -1",this.ladoDireito+7,this.y-10,this.vidaY+"px Arial","left",4),this.vidaY>14?this.vidaY=14:this.vidaY++),1==this.somMorte&&1==this.somMorteCool&&(this.somMorte=!1,this.somMorteCool=!1,this.somMorteCoolT=relog0.segundos,somToqueMorte()),this.colidiuMorte&&relog0.segundos>=this.somMorteCoolT+.15&&this.vida>0&&(this.somMorteCool=!0),this.corpoUpdate&&(this.corpoUpdateT=relog0.segundos,this.corpoAnterior=this.corpo,this.corpoUpdate=!1),relog0.segundos<=this.corpoUpdateT+this.exibeUpdateT&&0!=this.corpoDelta){if(this.corpoDelta>=0)var a="body +";else a="body ";txt1.puro(a+this.corpoDelta,this.ladoEsquerdo-7,this.y+this.posUpdateCorpo,"12px Arial","right",4)}if(this.menteUpdate&&(this.menteUpdateT=relog0.segundos,this.menteAnterior=this.mente,this.menteUpdate=!1),relog0.segundos<=this.menteUpdateT+this.exibeUpdateT&&0!=this.menteDelta){if(this.menteDelta>=0)a="mind +";else a="mind ";txt1.puro(a+this.menteDelta,this.ladoEsquerdo-7,this.y+this.posUpdateMente,"12px Arial","right",4)}if(this.almaUpdate&&(this.almaUpdateT=relog0.segundos,this.almaAnterior=this.alma,this.almaUpdate=!1),relog0.segundos<=this.almaUpdateT+this.exibeUpdateT&&0!=this.almaDelta){if(this.almaDelta>=0)a="soul +";else a="soul ";txt1.puro(a+this.almaDelta,this.ladoEsquerdo-7,this.y+this.posUpdateAlma,"12px Arial","right",4)}}controle(){upPressed&&this.podeCima&&this.puloCool&&0==this.noAr&&(somPulo(),this.somParedePode=!0,this.puloCoolT=relog0.segundos+.4,this.puloCool=!1,this.noAr=!0,this.ultimoChao=this.y,this.impulso=!0,this.forcaGravidade=0,this.sprite=spr_jogadorPulo,this.frame=0),this.puloCoolT<=relog0.segundos&&(this.puloCool=!0),this.impulso&&(this.colisaoCima(),0==this.colidiuCima&&(this.y-=(1.1-(this.ultimoChao-this.y)/this.alturaPulo)*this.forcaImpulso),1==this.colidiuCima&&(this.forcaGravidade=this.gravidade0),this.ultimoChao-this.y>=this.alturaPulo&&(this.impulso=!1,this.forcaGravidade=this.gravidade0)),(rightPressed||xPressed)&&this.podeDireita&&(this.colisaoDireita(),0==this.colidiuDireita&&(this.tFrame=.1,this.x+=this.passoDireita)),this.x>canvas.width+this.largura&&(this.x=-2),(leftPressed||zPressed)&&this.podeEsquerda&&(this.colisaoEsquerda(),0==this.colidiuEsquerda&&(this.x-=this.passoEsquerda)),this.x<-this.largura&&(this.x=canvas.width),downPressed&&1==this.podeBaixo&&(vento("direita",-this.passoEsquerda/3,this),this.podeCima=!1,this.podeDireita=!1,this.podeEsquerda=!1,this.frame=0,this.sprite=spr_jogadorAbaixa),0==downPressed&&(this.podeCima=!0,this.podeDireita=!0,this.podeEsquerda=!0,this.sprite=spr_jogador),downPressed&&this.somSlideCool&&0==this.noAr&&(this.somSlideCool=!1,this.somSlideCoolT=relog0.segundos,somSlide()),downPressed&&relog0.segundos>=this.somSlideCoolT+.15&&(this.somSlideCool=!0)}colisaoCima(){atualizaPos(this);for(var a=0;a<plataformas.length;a++){if(this.ladoCima-this.forcaImpulso<plataformas[a].ladoBaixo&&this.ladoBaixo>plataformas[a].ladoBaixo&&(this.ladoDireito>plataformas[a].ladoEsquerdo&&this.ladoDireito<plataformas[a].ladoDireito||this.ladoEsquerdo>plataformas[a].ladoEsquerdo&&this.ladoEsquerdo<plataformas[a].ladoDireito)){this.colidiuCima=!0,this.colidiu=!0,this.impulso=!1,this.y=plataformas[a].ladoBaixo+0;break}this.colidiuCima=!1}}colisaoDireita(){atualizaPos(this);for(var a=0;a<plataformas.length;a++){if(this.ladoDireito+this.passoDireita>plataformas[a].ladoEsquerdo&&this.ladoDireito<plataformas[a].ladoDireito&&(this.ladoCima>plataformas[a].ladoCima&&this.ladoCima<plataformas[a].ladoBaixo||this.ladoBaixo>plataformas[a].ladoCima&&this.ladoBaixo<plataformas[a].ladoBaixo)){this.colidiuDireita=!0,this.colidiu=!0,this.x=plataformas[a].ladoEsquerdo-this.largura-0,this.colidiuCom=a;break}this.colidiuDireita=!1}}colisaoEsquerda(){atualizaPos(this);for(var a=0;a<plataformas.length;a++){if(this.ladoEsquerdo-this.passoEsquerda<plataformas[a].ladoDireito&&this.ladoEsquerdo>plataformas[a].ladoEsquerdo&&(this.ladoCima>plataformas[a].ladoCima&&this.ladoCima<plataformas[a].ladoBaixo||this.ladoBaixo>plataformas[a].ladoCima&&this.ladoBaixo<plataformas[a].ladoBaixo)){this.colidiuEsquerda=!0,this.x=plataformas[a].ladoDireito+0,this.colidiuCom=a;break}this.colidiuEsquerda=!1}}gravidade(){atualizaPos(this);for(var a=0;a<plataformas.length;a++){if(this.ladoBaixo+this.forcaGravidade>plataformas[a].ladoCima&&this.ladoCima+this.forcaGravidade<plataformas[a].ladoCima&&(this.ladoDireito>plataformas[a].ladoEsquerdo&&this.ladoDireito<plataformas[a].ladoDireito||this.ladoEsquerdo>plataformas[a].ladoEsquerdo&&this.ladoEsquerdo<plataformas[a].ladoDireito)){1==this.somParedePode&&(somParede(),this.somParedePode=!1),this.colidiuBaixo=!0,this.noAr=!1,this.y=plataformas[a].ladoCima-this.altura-0,this.yAnterior=this.y,this.colidiuCom=a;break}this.colidiuBaixo=!1,this.noAr=!0}0==this.colidiuBaixo&&1==this.noAr&&(this.somParedePode=!0,this.y+=this.forcaGravidade)}vento(){0==this.colidiuMorte?this.vida>0&&(forcaVento=1+1.5*(1-this.mente/100)):forcaVento=0}}class Cartas extends Sprite{constructor(a,t,o,i,s,e){super(a,t,o,i,s),this.largura=this.lado*this.sprite[0][0].length,this.altura=this.lado*this.sprite[0].length,this.x=Math.floor(this.centroX-this.largura/2),this.y=Math.floor(this.centroY-this.altura/2),this.centroX=this.x+this.largura/2,this.centroY=this.y+this.altura/2,this.ladoEsquerdo=this.x,this.ladoDireito=this.x+this.largura,this.ladoCima=this.y,this.ladoBaixo=this.y+this.altura,this.pega=!1,this.estacionada=!1,this.ativaT=0,this.baralho=[["in love",spr_love,3,"You found love!","Gravity is weaker"],["something lost",spr_lost,3,"It was important but is","gone, gravity is stronger"],["medical problem",spr_medical,2,"Oh, no! You are hurt!","Movement is reduced"],["epiphany",spr_epiphany,3,"Ok! That makes sense!","the paths are clearer"],["achievement",spr_achievement,2,"You finally did that thing!","Death won't be so close"],["blackout",spr_blackout,2,"Oh, oh! Power is down!","It will be dark"],["overwhelmed",spr_overwhelmed,3,"Sometimes it's too much.","You are just tinny"],["bravery",spr_bravery,3,"Do what has to be done.","Menace of Death reduced"]],this.ativaSprite=spr_cartaAtiva,this.qual=e,this.ativaNome=this.baralho[this.qual][0],this.ativaEfeito=this.baralho[this.qual][1],this.ativaDuracao=this.baralho[this.qual][2],this.ativaDescr1=this.baralho[this.qual][3],this.ativaDescr2=this.baralho[this.qual][4],this.oQsou="carta"}existe(){cartaAnterior=this.qual,this.desenha(),0==this.pega&&(this.centroX>500&&this.centroX--,this.centroX<500&&this.centroX++,this.centroY>canvas.height/2&&this.centroY--,this.centroY<canvas.height/2&&this.centroY++,txt1.puro("?",this.centroX+random(-2,2),this.centroY+10,"32px Arial","center",1),txt1.x>2&&(txt1.x=this.centroX+2),txt1.x<-2&&(txt1.x=this.centroX-2))}estaciona(){1==this.pega&&0==this.estacionada&&(380==this.centroX&&666==this.centroY?(this.estacionada=!0,coletados++,this.sprite=spr_carta,this.frame=0,this.ativaT=idade):(this.sprite=spr_cartaEstaciona,this.centroX>380&&(this.centroX-=1),this.centroX<380&&(this.centroX+=1),this.centroY>666&&(this.centroY-=1),this.centroY<666&&(this.centroY+=3)))}ativada(){1==this.estacionada&&(idade<this.ativaT+this.ativaDuracao+1&&(this.sprite=this.ativaSprite,this.frame=0,qdSolido(454,604,146,22,3),txt1.puro(this.ativaNome,528,621,"18px Arial","center",1),txt1.puro(this.ativaDescr1,420,653,"16px Arial","left",4),txt1.puro(this.ativaDescr2,420,673,"16px Arial","left",4),txt1.puro("until the end of year "+(this.ativaT+this.ativaDuracao),420,693,"16px Arial","left",4),this.cartaEfeito=new Sprite(this.centroX,this.centroY,3,this.ativaEfeito,1),this.cartaEfeito.desenha(),this.efeito=new Sprite(jogador.x+12,jogador.y-10,2,this.ativaEfeito,1),this.efeito.desenha(),"in love"==this.ativaNome&&(jogador.alturaPulo=300,jogador.forcaImmpulso=2,jogador.gravidade0=2),"something lost"==this.ativaNome&&(jogador.alturaPulo=180,jogador.forcaImmpulso=5,jogador.gravidade0=20),"medical problem"==this.ativaNome&&(forcaVentoJogador=2,jogador.passoDireita=4,jogador.passoEsquerda=6),"epiphany"==this.ativaNome&&(plataformasV=[]),"achievement"==this.ativaNome&&(morte.distMorte=512),"blackout"==this.ativaNome&&(corFundo=4),"overwhelmed"==this.ativaNome&&(jogador.lado=1,jogador.podeBaixo=!1),"bravery"==this.ativaNome&&(morte.cartaAtiva=!0)),idade>=this.ativaT+this.ativaDuracao+1&&(jogador.alturaPulo=210,jogador.forcaImmpulso=18,jogador.gravidade0=10,forcaVentoJogador=1,jogador.passoDireita=6,jogador.passoEsquerda=9,morte.distMorte=256,corFundo=1,jogador.lado=3,jogador.podeBaixo=!0,morte.cartaAtiva=!1,"epiphany"==this.ativaNome&&(plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),70,10,spr_pltV1,10)),plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),220,10,spr_pltV2,10)),plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),360,10,spr_pltV1,10)),plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),479,10,spr_pltV2,10))),carta=criaCarta()))}}class Mortes extends Sprite{constructor(a,t,o,i,s){super(a,t,o,i,s),this.largura=this.lado*this.sprite[0][0].length,this.altura=this.lado*this.sprite[0].length,this.x=Math.floor(this.centroX-this.largura/2),this.y=Math.floor(this.centroY-this.altura/2),this.centroX=this.x+this.largura/2,this.centroY=this.y+this.altura/2,this.ladoEsquerdo=0,this.ladoDireito=0,this.ladoCima=0,this.ladoBaixo=0,this.ladoEsquerdo1=0,this.ladoDireito1=0,this.ladoCima1=0,this.ladoBaixo1=0,this.ladoEsquerdo2=0,this.ladoDireito2=0,this.ladoCima2=0,this.ladoBaixo2=0,this.ladoEsquerdo3=0,this.ladoDireito3=0,this.ladoCima3=0,this.ladoBaixo3=0,this.distMorte=256,this.limiteMorte=256,this.cartaAtiva=!1,this.oQsou="morte"}existe(){0==this.cartaAtiva?this.lado=3+Math.ceil((100-jogador.alma)/100*17):this.lado=1,jogador.centroX<morte.centroX?morte.sprite=spr_morteR:morte.sprite=spr_morte,this.sprite==spr_morte&&(this.ladoDireito1=this.x+.77*this.largura,this.ladoEsquerdo1=this.x,this.ladoCima1=this.ladoCima,this.ladoBaixo1=.97*this.ladoBaixo,this.ladoDireito2=this.ladoDireito,this.ladoEsquerdo2=this.ladoEsquerdo,this.ladoCima2=this.y+.03*this.altura,this.ladoBaixo2=this.y+.2*this.altura,this.ladoDireito3=this.x+.85*this.largura,this.ladoEsquerdo3=this.ladoEsquerdo,this.ladoCima3=this.y+.28*this.altura,this.ladoBaixo3=this.y+.47*this.altura),this.sprite==spr_morteR&&(this.ladoDireito1=this.x+this.largura,this.ladoEsquerdo1=this.x+.23*this.largura,this.ladoCima1=this.ladoCima,this.ladoBaixo1=.97*this.ladoBaixo,this.ladoDireito2=this.ladoEsquerdo,this.ladoEsquerdo2=this.ladoDireito,this.ladoCima2=this.y+.03*this.altura,this.ladoBaixo2=this.y+.2*this.altura,this.ladoDireito3=this.x+this.largura,this.ladoEsquerdo3=this.x+.15*this.largura,this.ladoCima3=this.y+.28*this.altura,this.ladoBaixo3=this.y+.47*this.altura),this.desenha()}persegue(){perseguir&&(jogador.centroX>this.centroX&&jogador.centroX-this.centroX>this.distMorte&&this.centroX<canvas.width-this.limiteMorte&&this.centroX++,jogador.centroX>this.centroX&&jogador.centroX-this.centroX<=this.distMorte&&this.centroX>this.largura/2+20&&this.centroX--,jogador.centroX<this.centroX&&this.centroX-jogador.centroX>this.distMorte&&this.centroX>this.limiteMorte&&(this.centroX-=2),this.centroY!=jogador.centroY&&(this.centroY>jogador.centroY&&this.centroY--,this.centroY<jogador.centroY&&this.centroY++),this.centroY<this.altura/2+20&&(this.centroY=this.altura/2+20),this.centroY+this.altura/2>620&&(this.centroY=620-this.altura/2))}}class Moeda{constructor(a,t,o){this.centroX=a,this.centroY=t,this.lado=4,this.disponivel=!0,this.pega=!1,this.oQSou="moeda",this.nome="",this.listaItens=[[spr_burger,1,2,2],[spr_maca,2,1,1],[spr_pizza,1,2,3],[spr_salada,3,0,1],[spr_sorvete,0,3,3],[spr_castanha,1,1,1],[spr_sushi,2,2,2],[spr_chocolate,0,4,4],[spr_refrigerante,0,1,1],[spr_dormir8h,8,8,8],[spr_cafe,0,5,2],[spr_livro,0,5,5],[spr_exercicios,6,2,2],[spr_dancar,5,2,6]],this.qual=o,this.sprite=this.listaItens[this.qual][0],this.corpo=this.listaItens[this.qual][1],this.mente=this.listaItens[this.qual][2],this.alma=this.listaItens[this.qual][3],this.largura=this.lado*this.sprite[0][0].length,this.altura=this.lado*this.sprite[0].length,this.x=Math.floor(this.centroX-this.largura/2),this.y=Math.floor(this.centroY-this.altura/2),this.ladoEsquerdo=this.x,this.ladoDireito=this.x+this.largura,this.ladoCima=this.y,this.ladoBaixo=this.y+this.altura,this.tUltimoFrame=0,this.tFrame=0,this.frame=0}desenha(a){if(1==this.pega&&moedas.splice(a,1),atualizaPos(this),0==this.pega)for(var t=0;t<this.sprite[this.frame].length;t++)for(var o=0;o<this.sprite[this.frame][t].length;o++)0!=this.sprite[this.frame][t][o]&&(ctx.beginPath(),ctx.rect(this.x+o*this.lado,this.y+t*this.lado,this.lado,this.lado),ctx.fillStyle=paleta[this.sprite[this.frame][t][o]],ctx.fill(),ctx.closePath()),this.tUltimoFrame+this.tFrame<=relog0.segundos&&(this.frame++,this.frame==this.sprite.length&&(this.frame=0),this.tUltimoFrame=relog0.segundos)}}class Qdpassante{constructor(a){this.x=random(canvas.width,2*canvas.width),this.y=random(2,554),this.limiteSuperior=0,this.limiteInferior=0,this.ladoMin=3,this.ladoMax=3,this.lado=4,this.largura=8,this.velocidade=5,this.cor=random(2,3),this.tipo=a,this.oQsou="qds"}passa(){"morte"==this.tipo&&(this.y<morte.centroY&&(this.y+=1),this.y>morte.centroY&&(this.y-=1),this.largura=3,this.lado=3),ctx.beginPath(),ctx.rect(this.x,this.y,this.largura,this.lado),ctx.fillStyle=paleta[this.cor],ctx.fill(),ctx.closePath(),this.x-=this.velocidade,this.x<-10&&(this.x=random(canvas.width,2*canvas.width),this.y=random(2,554))}}class Plataforma extends Sprite{constructor(a,t,o,i,s){super(a,t,o,i,s),this.largura=this.lado*this.sprite[0][0].length,this.altura=this.lado*this.sprite[0].length,this.x=Math.floor(this.centroX-this.largura/2),this.y=Math.floor(this.centroY-this.altura/2),this.ladoEsquerdo=0,this.ladoDireito=0,this.ladoCima=0,this.ladoBaixo=0,this.renascer=!1,this.oQsou="parede"}existe(){atualizaPos(this),this.desenha()}}function keyDownHandler(a){"Right"!=a.key&&"ArrowRight"!=a.key||(rightPressed=!0),"Left"!=a.key&&"ArrowLeft"!=a.key||(leftPressed=!0),"Up"!=a.key&&"ArrowUp"!=a.key||(upPressed=!0),"Down"!=a.key&&"ArrowDown"!=a.key||(downPressed=!0),"Enter"==a.key&&(enterPressed=!0),"x"!=a.key&&"X"!=a.key||(xPressed=!0),"z"!=a.key&&"Z"!=a.key||(zPressed=!0)}function keyUpHandler(a){"Right"!=a.key&&"ArrowRight"!=a.key||(rightPressed=!1),"Left"!=a.key&&"ArrowLeft"!=a.key||(leftPressed=!1),"Up"!=a.key&&"ArrowUp"!=a.key||(upPressed=!1),"Down"!=a.key&&"ArrowDown"!=a.key||(downPressed=!1),"Enter"==a.key&&(enterPressed=!1),"x"!=a.key&&"X"!=a.key||(xPressed=!1),"z"!=a.key&&"Z"!=a.key||(zPressed=!1)}function random(a,t){return a=Math.ceil(a),t=Math.floor(t),Math.floor(Math.random()*(t-a+1)+a)}function ajustaResolucao(a,t){return parseFloat(Number(a).toFixed(t))}function qdSolido(a,t,o,i,s){ctx.beginPath(),ctx.rect(a,t,o,i),ctx.fillStyle=paleta[s],ctx.fill(),ctx.closePath()}function qdBordas(a,t,o,i,s,e,r,d,l,h){ctx.beginPath(),1==s&&(ctx.moveTo(a,t),ctx.lineTo(o,t)),1==e&&(ctx.moveTo(o,t),ctx.lineTo(o,i)),1==r&&(ctx.moveTo(o,i),ctx.lineTo(a,i)),1==d&&(ctx.moveTo(a,i),ctx.lineTo(a,t)),ctx.lineWidth=l,ctx.strokeStyle=paleta[h],ctx.stroke(),ctx.closePath()}function vento(a,t,o){if("direita"==a&&(o.x-=t,jogador.colisaoDireita(),o.x<-o.largura)){if(0==o.renascer)2==random(1,2)&&(o.renascer=!0);o.x=canvas.width+10}}function resetaTxts(){txt1.setup=!1,txt2.setup=!1,txt3.setup=!1,txt4.setup=!1,txtp.setup=!1}function criaCarta(){cartaX=[-random(100,canvas.width),canvas.width+random(100,canvas.width)];for(var a=cartaX[random(0,1)],t=extra*-random(canvas.height,2*canvas.height),o=random(0,7);o==cartaAnterior;)o=random(0,7);return carta=idade>3?new Cartas(a,t,4,spr_carta,.3,o):new Cartas(Math.floor(1.6*a),Math.floor(1.6*t),4,spr_carta,.3,o),carta}function atualizaPos(a){a.largura=a.lado*a.sprite[0][0].length,a.altura=a.lado*a.sprite[0].length,a.ladoEsquerdo=a.x,a.ladoDireito=a.x+a.largura,a.ladoCima=a.y,a.ladoBaixo=a.y+a.altura,a.centroX=a.x+a.largura/2,a.centroY=a.y+a.altura/2}function somConfirma(){som=new Notas("mi2",2,.3,"sine"),som.toca(),som=new Notas("mi4",2,.3,"sine"),som.toca()}function somMoeda(){som=new Notas("do3",2,.05,"sine"),som.toca(),som=new Notas("si2",2,.05,"sine"),som.toca()}function somCarta(){som=new Notas("fa3",2,.1,"sine"),som.toca(),som=new Notas("mi5",2,.1,"sine"),som.toca()}function somParede(){som=new Notas("sol2",.3,.2,"sine"),som.toca()}function somPulo(){som=new Notas("do4",1,.03,"sawtooth"),som.toca()}function somSlide(){som=new Notas("do3",.2,.05,"sawtooth"),som.toca()}function somToqueMorte(){som=new Notas("fa2",.2,.02,"sawtooth"),som.toca(),som=new Notas("fa3",.3,.03,"sawtooth"),som.toca()}function tocaMusica(a){for(var t=0;t<a.length;t++)a[t].toca()}function criaMusicaMuda(){temaMudo1=new Instrumento(!1,0,["la3",4,.1,"sine"]),temaMudo2=new Instrumento(!1,0,["la5",4,.1,"sine"]),temaMudo=[temaMudo1,temaMudo2]}function criaTemaTutorial(){tema01_1=new Instrumento(!0,.1,["la2",1.2,1e-4,"sine","si3",.3,.2,"sine","la3",.1,.2,"sine","sol3",.1,.2,"sine","sol3",.1,.2,"sine","mi3",.3,.2,"sine","mi3",.1,.2,"sine","mi3",.1,.2,"sine","mi3",.1,.2,"sine","mi3",.3,.2,"sine","mi3",.1,.2,"sine","mi3",.1,.2,"sine","mi3",.1,.2,"sine","mi3",.3,.2,"sine","mi3",.1,.2,"sine","mi3",.1,.2,"sine","mi3",.1,.2,"sine","mi3",.3,.2,"sine","mi3",.3,.2,"sine","mi3",.3,.2,"sine","si5",.3,.1,"triangle","la5",.3,.1,"triangle","sol5",.3,.1,"triangle","sol5",.3,.1,"triangle"]),temaTutorial=[tema01_1]}function criaTemaPrincipal(){tema02_1=new Instrumento(!0,.1,["la2",1.2,1e-4,"sine","do2",.3,.2,"sine","re2",.1,.2,"sine","do2",.1,.2,"sine","re2",.1,.2,"sine","fa2",.1,.2,"sine","fa2",.1,.2,"sine","fa2",.1,.2,"sine","do2",.3,.2,"sine","re2",.1,.2,"sine","do2",.1,.2,"sine","re2",.1,.2,"sine","si2",.3,.2,"sine","si2",.3,.2,"sine","si2",.3,.2,"sine","do5",.3,.2,"sine","re5",.1,.2,"sine","do5",.1,.2,"sine","re5",.1,.2,"sine","fa5",.1,.2,"sine","fa5",.1,.2,"sine","fa5",.1,.2,"sine","do5",.3,.2,"sine","re5",.1,.2,"sine","do5",.1,.2,"sine","re5",.1,.2,"sine","si5",.3,.2,"sine","si5",.3,.2,"sine","si5",.3,.2,"sine","la2",1.2,1e-4,"sine"]),temaPrincipal=[tema02_1]}function criaTemaGameOver(){tema03_1=new Instrumento(!0,.1,["do5",.5,.2,"sine","do5",.7,.2,"sine","do5",.5,.2,"sine","si4",.7,.2,"sine","la2",1.2,1e-4,"sine"]),temaGameOver=[tema03_1]}function telaInicial(){0==cenaCarregada&&(1==fim&&(preSetupCarregado=!1,preSetup(),final=!1),txtY=-20,pagina=1,cenaCarregada=!0,jogador=new Jogadores(420,0,3,spr_jogador,.2),hitX=900,morte=new Sprite(hitX,220,2,spr_morteR,.7),podeEnter=!1),qdSolido(0,0,canvas.width,canvas.height,1),1==pagina&&(txt1.puro("js13kGames",canvas.width/2,txtY,"96px Impact","center",3),txtY<392&&(txtY+=4),392==txtY&&(txtY+=4,tEspera=relog0.segundos),396==txtY&&txt1.puro("*tu-plim!*",canvas.width/2,txtY+20,"12px verdana","center",3),relog0.segundos>=tEspera+1.5&&(pagina=2,tEspera=relog0.segundos,txt1.setup=!1)),2==pagina&&(qdSolido(0,0,canvas.width,canvas.height,2),txt1.surge("deadly","64px Verdana","center",2,2,3,3,canvas.width/2,300,.1),txt2.surge("jumps & slides","64px Verdana","center",2,2,3,3,canvas.width/2,360,.3),txt3.surge("on","64px Arial","center",2,2,3,3,280,420,.6),txt4.surge("the","64px Verdana","center",2,2,3,3,384,420,.9),txt5.surge("run","64px Verdana","center",2,2,3,3,508,420,1.2),relog0.segundos>=tEspera+1&&(morte.centroX=hitX,morte.desenha(),hitX>canvas.width/2&&(hitX-=2),hitX<=canvas.width/2&&(txt6.pisca("press ENTER to begin","press ENTER to begin","24px Arial","center",3,4,canvas.width/2,486,.5,.5),txtp.puro(". js13k - 2022 .",canvas.width/2,canvas.height/2+200,"16px Arial","center",3),txtp.puro("game by github.com/Github2diogo",canvas.width/2,canvas.height/2+220,"16px Arial","center",3),podeEnter=!0))),document.onkeyup=function(a){"Enter"==a.code&&1==podeEnter&&(cenaCarregada=!1,palco.cena=1,somConfirma())}}function tutorial(){if(0==cenaCarregada&&(relog0=new Relogio,relog0Roda=!0,cenaCarregada=!0,resetaTxts(),gameoverY=-200,podeEnter=!1,podeMusica=!0,criaTemaTutorial(),palco.musica="temaTutorial",ui=new UIs,forcaVento=1,jogador=new Jogadores(420,0,3,spr_jogador,.2),jogador.podeBaixo=!0,jogador.podeCima=!0,jogador.podeDireita=!0,jogador.podeEsquerda=!0,jogador.limiteBaixo=canvas.height,jogador.limiteCima=0,jogador.limiteDireita=canvas.width,jogador.limiteEsquerda=0,morte=new Mortes(140,250,3,spr_morte,.7),plataformas=[],platChao=[],plataformasH=[],plataformasV=[],platChao.push(new Plataforma(0,570,28,spr_rio,.2)),plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),479,10,spr_pltV2,10)),plataformasH.push(new Plataforma(canvas.width+random(0,canvas.width),310,16,spr_pltH1,2)),moedas=[],moedasAlturasV=[90,240,380,500],moedasT=0,moedasSobrou=!1,moedasJogadorUpdate=!1,moedasJogadorUpdateT=0,idade=0,idadeT=relog0.segundos,podeEnter=!1,pagina=0),qdSolido(0,0,canvas.width,canvas.height,1),0==moedas.length){var a,t=canvas.width+random(100,canvas.width),o=random(0,moedasAlturasV.length-1),i=moedasAlturasV[o],s=moedasAlturasV[o+2],e=0;for(o+2>moedasAlturasV.length-1&&(s=moedasAlturasV[o+2-(moedasAlturasV.length-1)-1]),a=random(0,moedasMax),e=random(0,moedasMax);a==e;)e=random(0,moedasMax);moedas.push(new Moeda(t,i,a)),moedas.push(new Moeda(t,s,e)),moedasSobrou=!1}1==moedas.length&&(0==moedasSobrou&&(moedasSobrou=!0,tMoedas=relog0.segundos),relog0.segundos>=tMoedas+.3&&(tMoedas=relog0.segundos,moedas[0].lado--,vento("direita",-4*forcaVento,moedas[0])),0==moedas[0].lado&&(moedas[0].pega=!0));for(var r=0;r<moedas.length;r++)vento("direita",1*forcaVento,moedas[r]),moedas[r].desenha();if(platChao[0].existe(),jogador.desenha(),jogador.controle(),jogador.gravidade(),jogador.colisaoMoedas(),plataformas=platChao.concat(plataformasH,plataformasV),jogador.updateStatus(),0==pagina&&(txt1.puro("1 of 4.",canvas.width/2,150,"24px Arial","center",4),txt1.puro("To move, go with RIGHT and LEFT keys",canvas.width/2,200,"24px Arial","center",4),txt1.puro("or (if you are a pro) use Z and X.",canvas.width/2,250,"24px Arial","center",4),txt1.puro("To jump use the UP key and",canvas.width/2,300,"24px Arial","center",4),txt1.puro("use the DOWN key to slide (so fun!).",canvas.width/2,350,"24px Arial","center",4)),1==pagina&&(txt1.puro("2 of 4.",canvas.width/2,150,"24px Arial","center",4),txt1.puro("Speaking of fun, you can WARP",canvas.width/2,200,"24px Arial","center",4),txt1.puro("LEFT TO RIGHT and RIGHT TO LEFT",canvas.width/2,250,"24px Arial","center",4),txt1.puro("or simply let the *mysterious*",canvas.width/2,300,"24px Arial","center",4),txt1.puro("pushing force do the job.",canvas.width/2,350,"24px Arial","center",4),vento("direita",2*forcaVento,jogador)),2==pagina){vento("direita",1*forcaVento,jogador);for(r=1;r<plataformas.length;r++)plataformas[r].existe(),vento("direita",3,plataformas[r]);txt1.puro("3 of 4.",canvas.width/2,150,"24px Arial","center",4),txt1.puro("The passing of years will consume",canvas.width/2,200,"24px Arial","center",4),txt1.puro("body, mind and soul, but don't worry.",canvas.width/2,250,"24px Arial","center",4),txt1.puro("Studies show you can collect items to recover",canvas.width/2,300,"24px Arial","center",4),txt1.puro("and destiny cards to shape your destiny (ha!)",canvas.width/2,350,"24px Arial","center",4)}if(3==pagina){vento("direita",1*forcaVento,jogador);for(r=1;r<plataformas.length;r++)plataformas[r].existe(),vento("direita",3,plataformas[r]);morte.existe(),morte.persegue(),morte.distMorte=80,txtp.pisca("press ENTER to end tutorial","press ENTER to end tutorial","32px Arial","center",1,4,canvas.width/2,630,.5,.5),txt1.puro("4 of 4.",canvas.width/2,150,"24px Arial","center",4),txt1.puro("Finally, avoid touching Death (it sucks life)",canvas.width/2,200,"24px Arial","center",4),txt1.puro("TO WIN you must COLLECT",canvas.width/2,250,"24px Arial","center",4),txt1.puro("AT LEAST 32 itens & cards AND THEN DIE.",canvas.width/2,300,"24px Arial","center",4),txt1.puro("Now, let's have fun!",canvas.width/2,350,"24px Arial","center",4)}pagina<3&&txtp.pisca("press ENTER to continue","press ENTER to continue","32px Arial","center",1,4,canvas.width/2,630,.5,.5),txtp.pisca(" TUTORIAL ","[ TUTORIAL ]","32px Arial","center",3,4,canvas.width/2,100,.5,.5),document.onkeyup=function(a){"Enter"==a.code&&(pagina++,somConfirma(),4==pagina&&(cenaCarregada=!1,palco.cena=2,somConfirma()))}}function cena(){if(0==cenaCarregada){relog0=new Relogio,relog0Roda=!0,cenaCarregada=!0,resetaTxts(),gameoverY=-200,podeEnter=!1,podeMusica=!0,criaTemaPrincipal(),criaTemaGameOver(),palco.musica="temaPrincipal",corFundo=1,coletados=0,ui=new UIs,forcaVento=1,jogador=new Jogadores(420,0,3,spr_jogador,.2),jogador.podeBaixo=!0,jogador.podeCima=!0,jogador.podeDireita=!0,jogador.podeEsquerda=!0,jogador.limiteBaixo=canvas.height,jogador.limiteCima=0,jogador.limiteDireita=canvas.width,jogador.limiteEsquerda=0,morte=new Mortes(140,250,3,spr_morte,.7),plataformas=[],platChao=[],plataformasH=[],plataformasV=[],platChao.push(new Plataforma(0,570,28,spr_rio,.2)),plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),70,10,spr_pltV1,10)),plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),220,10,spr_pltV2,10)),plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),360,10,spr_pltV1,10)),plataformasV.push(new Plataforma(canvas.width+random(0,canvas.width),479,10,spr_pltV2,10)),pltAlturasV=[70,220,360,480],podeCriarCarta=!0,criaCarta(),moedas=[],moedasAlturasV=[90,240,380,500],moedasT=0,moedasSobrou=!1,moedasJogadorUpdate=!1,moedasJogadorUpdateT=0,Qdpassantes=[];for(var a=7,t=0;t<a;t++)Qdpassantes.push(new Qdpassante("fundo"));for(a=7,t=0;t<a;t++)Qdpassantes.push(new Qdpassante("morte"));tempoPassa=!0,idade=0,idadeT=relog0.segundos}qdSolido(0,0,canvas.width,canvas.height,corFundo);for(t=0;t<Qdpassantes.length;t++)Qdpassantes[t].passa();if(0==moedas.length){var o,i=canvas.width+random(100,canvas.width),s=random(0,moedasAlturasV.length-1),e=moedasAlturasV[s],r=moedasAlturasV[s+2],d=0;for(s+2>moedasAlturasV.length-1&&(r=moedasAlturasV[s+2-(moedasAlturasV.length-1)-1]),o=random(0,moedasMax),d=random(0,moedasMax);o==d;)d=random(0,moedasMax);moedas.push(new Moeda(i,e,o)),moedas.push(new Moeda(i,r,d)),moedasSobrou=!1}1==moedas.length&&(0==moedasSobrou&&(moedasSobrou=!0,tMoedas=relog0.segundos),relog0.segundos>=tMoedas+.3&&(tMoedas=relog0.segundos,moedas[0].lado--,vento("direita",-4*forcaVento,moedas[0])),0==moedas[0].lado&&(moedas[0].pega=!0));for(t=0;t<moedas.length;t++)vento("direita",Math.round(forcaVento),moedas[t]),moedas[t].desenha();platChao[0].existe(),vento("direita",1*forcaVentoJogador,jogador),jogador.desenha(),jogador.controle(),jogador.gravidade(),jogador.colisaoMorte(),jogador.colisaoCarta(),jogador.colisaoMoedas(),jogador.vento(),ui.atualiza(),ui.desenha(),carta.existe(),carta.estaciona(),carta.ativada(),pltAlturas=[160,310,450];for(t=0;t<plataformasH.length;t++)plataformasH[t].renascer&&plataformasH.splice(t,1);if(0==plataformasH.length||plataformasH.length<=12){var l=canvas.width+100+random(10,canvas.width),h=pltAlturas[random(0,2)];if(0==pltAlturasOcupadas[0]||0==pltAlturasOcupadas[1]||0==pltAlturasOcupadas[2]){if(h==pltAlturas[0]&&1==pltAlturasOcupadas[0]){var n=random(1,2);h=pltAlturas[n]}if(h==pltAlturas[1]&&1==pltAlturasOcupadas[1])1==(n=random(1,2))&&(n=0);if(h==pltAlturas[2]&&1==pltAlturasOcupadas[2]){n=random(0,1);h=pltAlturas[n]}h==pltAlturas[0]&&(pltAlturasOcupadas[0]=1),h==pltAlturas[1]&&(pltAlturasOcupadas[1]=1),h==pltAlturas[2]&&(pltAlturasOcupadas[2]=1)}1==pltAlturasOcupadas[0]&&1==pltAlturasOcupadas[1]&&1==pltAlturasOcupadas[2]&&(pltAlturasOcupadas[0]=0,pltAlturasOcupadas[1]=0,pltAlturasOcupadas[2]=0),plats=[spr_pltH1,spr_pltH1],plats=plats[random(0,1)],plataformasH.push(new Plataforma(l,h,16,plats,2))}plataformas=platChao.concat(plataformasH,plataformasV);for(t=1;t<plataformas.length;t++)plataformas[t].existe(),vento("direita",3*forcaVento,plataformas[t]);jogador.updateStatus(),carta.existe(),carta.estaciona(),carta.ativada(),morte.persegue(),morte.existe(),jogador.vida<=0&&(jogador.podeBaixo=!1,jogador.podeCima=!1,jogador.podeDireita=!1,jogador.podeEsquerda=!1,jogador.tFrame=1e4,"temaGameOver"!=palco.musica&&(palco.musica="temaGameOver"),tempoPassa=!1,forcaVento=0,forcaVentoJogador=0,plataformas[0].tFrame=500,ui.gameover()),document.onkeyup=function(a){"Enter"==a.code&&podeEnter&&(somConfirma(),cenaCarregada=!1,palco.cena=2)}}function preSetup(){0==preSetupCarregado&&(palco=new Palco(0,"tema01"),relog0=new Relogio,txt1=new Texto,txt2=new Texto,txt3=new Texto,txt4=new Texto,txt5=new Texto,txt6=new Texto,txtp=new Texto,plataformas=[],moedas=[],colisao=[],qdpassantes_fundo=[],qdpassantes_frente=[],tEspera=0,podeMusica=!1,preSetupCarregado=!0)}function main(){ctx.clearRect(0,0,canvas.width,canvas.height),preSetup(),relog0.clockInterno(),palco.chamaCena(),1==podeMusica&&palco.tocaMusica(),requestAnimationFrame(main)}document.addEventListener("keydown",keyDownHandler,!1),document.addEventListener("keyup",keyUpHandler,!1),main();

</script>

</body>
</html>